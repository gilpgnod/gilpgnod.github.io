/* Espera 11 minutos después de hacer los cambios en tu sitio, para depués
 * actualizar este archivo. */
const CACHE = "gilpgnod";
const VERSION = "1.02"

/** Archivos requeridos para que la aplicación funcione fuera de línea. */
const ARCHIVOS = [
 "adapta.js",
 "estilos.css",
 "favicon.ico",
 "index.html",
 "index.js",
 "LICENSE",
 "question.js",
 "site.webmanifest",
 "addon/comment/comment.js",
 "addon/comment/continuecomment.js",
 "addon/dialog/dialog.css",
 "addon/dialog/dialog.js",
 "addon/display/autorefresh.js",
 "addon/display/fullscreen.css",
 "addon/display/fullscreen.js",
 "addon/display/panel.js",
 "addon/display/placeholder.js",
 "addon/display/rulers.js",
 "addon/edit/closebrackets.js",
 "addon/edit/closetag.js",
 "addon/edit/continuelist.js",
 "addon/edit/matchbrackets.js",
 "addon/edit/matchtags.js",
 "addon/edit/trailingspace.js",
 "addon/fold/brace-fold.js",
 "addon/fold/comment-fold.js",
 "addon/fold/foldcode.js",
 "addon/fold/foldgutter.css",
 "addon/fold/foldgutter.js",
 "addon/fold/indent-fold.js",
 "addon/fold/markdown-fold.js",
 "addon/fold/xml-fold.js",
 "addon/hint/anyword-hint.js",
 "addon/hint/css-hint.js",
 "addon/hint/html-hint.js",
 "addon/hint/javascript-hint.js",
 "addon/hint/show-hint.css",
 "addon/hint/show-hint.js",
 "addon/hint/sql-hint.js",
 "addon/hint/xml-hint.js",
 "addon/lint/coffeescript-lint.js",
 "addon/lint/css-lint.js",
 "addon/lint/html-lint.js",
 "addon/lint/javascript-lint.js",
 "addon/lint/json-lint.js",
 "addon/lint/lint.css",
 "addon/lint/lint.js",
 "addon/lint/yaml-lint.js",
 "addon/merge/merge.css",
 "addon/merge/merge.js",
 "addon/mode/loadmode.js",
 "addon/mode/multiplex.js",
 "addon/mode/multiplex_test.js",
 "addon/mode/overlay.js",
 "addon/mode/simple.js",
 "addon/runmode/colorize.js",
 "addon/runmode/runmode-standalone.js",
 "addon/runmode/runmode.js",
 "addon/runmode/runmode.node.js",
 "addon/scroll/annotatescrollbar.js",
 "addon/scroll/scrollpastend.js",
 "addon/scroll/simplescrollbars.css",
 "addon/scroll/simplescrollbars.js",
 "addon/search/jump-to-line.js",
 "addon/search/match-highlighter.js",
 "addon/search/matchesonscrollbar.css",
 "addon/search/matchesonscrollbar.js",
 "addon/search/search.js",
 "addon/search/searchcursor.js",
 "addon/selection/active-line.js",
 "addon/selection/mark-selection.js",
 "addon/selection/selection-pointer.js",
 "addon/tern/tern.css",
 "addon/tern/tern.js",
 "addon/tern/worker.js",
 "addon/wrap/hardwrap.js",
 "img/80x15.png",
 "img/icono1024.png",
 "img/icono2048.png",
 "img/icono256.png",
 "keymap/emacs.js",
 "keymap/sublime.js",
 "keymap/vim.js",
 "lib/codemirror.css",
 "lib/codemirror.js",
 "mode/index.html",
 "mode/meta.js",
 "mode/apl/apl.js",
 "mode/apl/index.html",
 "mode/asciiarmor/asciiarmor.js",
 "mode/asciiarmor/index.html",
 "mode/asn.1/asn.1.js",
 "mode/asn.1/index.html",
 "mode/asterisk/asterisk.js",
 "mode/asterisk/index.html",
 "mode/brainfuck/brainfuck.js",
 "mode/brainfuck/index.html",
 "mode/clike/clike.js",
 "mode/clike/index.html",
 "mode/clike/scala.html",
 "mode/clike/test.js",
 "mode/clojure/clojure.js",
 "mode/clojure/index.html",
 "mode/clojure/test.js",
 "mode/cmake/cmake.js",
 "mode/cmake/index.html",
 "mode/cobol/cobol.js",
 "mode/cobol/index.html",
 "mode/coffeescript/coffeescript.js",
 "mode/coffeescript/index.html",
 "mode/commonlisp/commonlisp.js",
 "mode/commonlisp/index.html",
 "mode/crystal/crystal.js",
 "mode/crystal/index.html",
 "mode/css/css.js",
 "mode/css/gss.html",
 "mode/css/gss_test.js",
 "mode/css/index.html",
 "mode/css/less.html",
 "mode/css/less_test.js",
 "mode/css/scss.html",
 "mode/css/scss_test.js",
 "mode/css/test.js",
 "mode/cypher/cypher.js",
 "mode/cypher/index.html",
 "mode/cypher/test.js",
 "mode/d/d.js",
 "mode/d/index.html",
 "mode/d/test.js",
 "mode/dart/dart.js",
 "mode/dart/index.html",
 "mode/diff/diff.js",
 "mode/diff/index.html",
 "mode/django/django.js",
 "mode/django/index.html",
 "mode/dockerfile/dockerfile.js",
 "mode/dockerfile/index.html",
 "mode/dockerfile/test.js",
 "mode/dtd/dtd.js",
 "mode/dtd/index.html",
 "mode/dylan/dylan.js",
 "mode/dylan/index.html",
 "mode/dylan/test.js",
 "mode/ebnf/ebnf.js",
 "mode/ebnf/index.html",
 "mode/ecl/ecl.js",
 "mode/ecl/index.html",
 "mode/eiffel/eiffel.js",
 "mode/eiffel/index.html",
 "mode/elm/elm.js",
 "mode/elm/index.html",
 "mode/erlang/erlang.js",
 "mode/erlang/index.html",
 "mode/factor/factor.js",
 "mode/factor/index.html",
 "mode/fcl/fcl.js",
 "mode/fcl/index.html",
 "mode/forth/forth.js",
 "mode/forth/index.html",
 "mode/fortran/fortran.js",
 "mode/fortran/index.html",
 "mode/gas/gas.js",
 "mode/gas/index.html",
 "mode/gfm/gfm.js",
 "mode/gfm/index.html",
 "mode/gfm/test.js",
 "mode/gherkin/gherkin.js",
 "mode/gherkin/index.html",
 "mode/go/go.js",
 "mode/go/index.html",
 "mode/groovy/groovy.js",
 "mode/groovy/index.html",
 "mode/haml/haml.js",
 "mode/haml/index.html",
 "mode/haml/test.js",
 "mode/handlebars/handlebars.js",
 "mode/handlebars/index.html",
 "mode/haskell/haskell.js",
 "mode/haskell/index.html",
 "mode/haskell-literate/haskell-literate.js",
 "mode/haskell-literate/index.html",
 "mode/haxe/haxe.js",
 "mode/haxe/index.html",
 "mode/htmlembedded/htmlembedded.js",
 "mode/htmlembedded/index.html",
 "mode/htmlmixed/htmlmixed.js",
 "mode/htmlmixed/index.html",
 "mode/http/http.js",
 "mode/http/index.html",
 "mode/idl/idl.js",
 "mode/idl/index.html",
 "mode/javascript/index.html",
 "mode/javascript/javascript.js",
 "mode/javascript/json-ld.html",
 "mode/javascript/test.js",
 "mode/javascript/typescript.html",
 "mode/jinja2/index.html",
 "mode/jinja2/jinja2.js",
 "mode/jsx/index.html",
 "mode/jsx/jsx.js",
 "mode/jsx/test.js",
 "mode/julia/index.html",
 "mode/julia/julia.js",
 "mode/livescript/index.html",
 "mode/livescript/livescript.js",
 "mode/lua/index.html",
 "mode/lua/lua.js",
 "mode/markdown/index.html",
 "mode/markdown/markdown.js",
 "mode/markdown/test.js",
 "mode/mathematica/index.html",
 "mode/mathematica/mathematica.js",
 "mode/mbox/index.html",
 "mode/mbox/mbox.js",
 "mode/mirc/index.html",
 "mode/mirc/mirc.js",
 "mode/mllike/index.html",
 "mode/mllike/mllike.js",
 "mode/modelica/index.html",
 "mode/modelica/modelica.js",
 "mode/mscgen/index.html",
 "mode/mscgen/mscgen.js",
 "mode/mscgen/mscgen_test.js",
 "mode/mscgen/msgenny_test.js",
 "mode/mscgen/xu_test.js",
 "mode/mumps/index.html",
 "mode/mumps/mumps.js",
 "mode/nginx/index.html",
 "mode/nginx/nginx.js",
 "mode/nsis/index.html",
 "mode/nsis/nsis.js",
 "mode/ntriples/index.html",
 "mode/ntriples/ntriples.js",
 "mode/octave/index.html",
 "mode/octave/octave.js",
 "mode/oz/index.html",
 "mode/oz/oz.js",
 "mode/pascal/index.html",
 "mode/pascal/pascal.js",
 "mode/pegjs/index.html",
 "mode/pegjs/pegjs.js",
 "mode/perl/index.html",
 "mode/perl/perl.js",
 "mode/php/index.html",
 "mode/php/php.js",
 "mode/php/test.js",
 "mode/pig/index.html",
 "mode/pig/pig.js",
 "mode/powershell/index.html",
 "mode/powershell/powershell.js",
 "mode/powershell/test.js",
 "mode/properties/index.html",
 "mode/properties/properties.js",
 "mode/protobuf/index.html",
 "mode/protobuf/protobuf.js",
 "mode/pug/index.html",
 "mode/pug/pug.js",
 "mode/puppet/index.html",
 "mode/puppet/puppet.js",
 "mode/python/index.html",
 "mode/python/python.js",
 "mode/python/test.js",
 "mode/q/index.html",
 "mode/q/q.js",
 "mode/r/index.html",
 "mode/r/r.js",
 "mode/rpm/index.html",
 "mode/rpm/rpm.js",
 "mode/rpm/changes/index.html",
 "mode/rst/index.html",
 "mode/rst/rst.js",
 "mode/ruby/index.html",
 "mode/ruby/ruby.js",
 "mode/ruby/test.js",
 "mode/rust/index.html",
 "mode/rust/rust.js",
 "mode/rust/test.js",
 "mode/sas/index.html",
 "mode/sas/sas.js",
 "mode/sass/index.html",
 "mode/sass/sass.js",
 "mode/sass/test.js",
 "mode/scheme/index.html",
 "mode/scheme/scheme.js",
 "mode/shell/index.html",
 "mode/shell/shell.js",
 "mode/shell/test.js",
 "mode/sieve/index.html",
 "mode/sieve/sieve.js",
 "mode/slim/index.html",
 "mode/slim/slim.js",
 "mode/slim/test.js",
 "mode/smalltalk/index.html",
 "mode/smalltalk/smalltalk.js",
 "mode/smarty/index.html",
 "mode/smarty/smarty.js",
 "mode/solr/index.html",
 "mode/solr/solr.js",
 "mode/soy/index.html",
 "mode/soy/soy.js",
 "mode/soy/test.js",
 "mode/sparql/index.html",
 "mode/sparql/sparql.js",
 "mode/spreadsheet/index.html",
 "mode/spreadsheet/spreadsheet.js",
 "mode/sql/index.html",
 "mode/sql/sql.js",
 "mode/stex/index.html",
 "mode/stex/stex.js",
 "mode/stex/test.js",
 "mode/stylus/index.html",
 "mode/stylus/stylus.js",
 "mode/swift/index.html",
 "mode/swift/swift.js",
 "mode/swift/test.js",
 "mode/tcl/index.html",
 "mode/tcl/tcl.js",
 "mode/textile/index.html",
 "mode/textile/test.js",
 "mode/textile/textile.js",
 "mode/tiddlywiki/index.html",
 "mode/tiddlywiki/tiddlywiki.css",
 "mode/tiddlywiki/tiddlywiki.js",
 "mode/tiki/index.html",
 "mode/tiki/tiki.css",
 "mode/tiki/tiki.js",
 "mode/toml/index.html",
 "mode/toml/toml.js",
 "mode/tornado/index.html",
 "mode/tornado/tornado.js",
 "mode/troff/index.html",
 "mode/troff/troff.js",
 "mode/ttcn/index.html",
 "mode/ttcn/ttcn.js",
 "mode/ttcn-cfg/index.html",
 "mode/ttcn-cfg/ttcn-cfg.js",
 "mode/turtle/index.html",
 "mode/turtle/turtle.js",
 "mode/twig/index.html",
 "mode/twig/twig.js",
 "mode/vb/index.html",
 "mode/vb/vb.js",
 "mode/vbscript/index.html",
 "mode/vbscript/vbscript.js",
 "mode/velocity/index.html",
 "mode/velocity/velocity.js",
 "mode/verilog/index.html",
 "mode/verilog/test.js",
 "mode/verilog/verilog.js",
 "mode/vhdl/index.html",
 "mode/vhdl/vhdl.js",
 "mode/vue/index.html",
 "mode/vue/vue.js",
 "mode/wast/index.html",
 "mode/wast/test.js",
 "mode/wast/wast.js",
 "mode/webidl/index.html",
 "mode/webidl/webidl.js",
 "mode/xml/index.html",
 "mode/xml/test.js",
 "mode/xml/xml.js",
 "mode/xquery/index.html",
 "mode/xquery/test.js",
 "mode/xquery/xquery.js",
 "mode/yacas/index.html",
 "mode/yacas/yacas.js",
 "mode/yaml/index.html",
 "mode/yaml/yaml.js",
 "mode/yaml-frontmatter/index.html",
 "mode/yaml-frontmatter/yaml-frontmatter.js",
 "mode/z80/index.html",
 "mode/z80/z80.js",
 "theme/3024-day.css",
 "theme/3024-night.css",
 "theme/abbott.css",
 "theme/abcdef.css",
 "theme/ambiance-mobile.css",
 "theme/ambiance.css",
 "theme/ayu-dark.css",
 "theme/ayu-mirage.css",
 "theme/base16-dark.css",
 "theme/base16-light.css",
 "theme/bespin.css",
 "theme/blackboard.css",
 "theme/cobalt.css",
 "theme/colorforth.css",
 "theme/darcula.css",
 "theme/dracula.css",
 "theme/duotone-dark.css",
 "theme/duotone-light.css",
 "theme/eclipse.css",
 "theme/elegant.css",
 "theme/erlang-dark.css",
 "theme/gruvbox-dark.css",
 "theme/hopscotch.css",
 "theme/icecoder.css",
 "theme/idea.css",
 "theme/isotope.css",
 "theme/juejin.css",
 "theme/lesser-dark.css",
 "theme/liquibyte.css",
 "theme/lucario.css",
 "theme/material-darker.css",
 "theme/material-ocean.css",
 "theme/material-palenight.css",
 "theme/material.css",
 "theme/mbo.css",
 "theme/mdn-like.css",
 "theme/midnight.css",
 "theme/monokai.css",
 "theme/moxer.css",
 "theme/neat.css",
 "theme/neo.css",
 "theme/night.css",
 "theme/nord.css",
 "theme/oceanic-next.css",
 "theme/panda-syntax.css",
 "theme/paraiso-dark.css",
 "theme/paraiso-light.css",
 "theme/pastel-on-dark.css",
 "theme/railscasts.css",
 "theme/rubyblue.css",
 "theme/seti.css",
 "theme/shadowfox.css",
 "theme/solarized.css",
 "theme/ssms.css",
 "theme/the-matrix.css",
 "theme/tomorrow-night-bright.css",
 "theme/tomorrow-night-eighties.css",
 "theme/ttcn.css",
 "theme/twilight.css",
 "theme/vibrant-ink.css",
 "theme/xq-dark.css",
 "theme/xq-light.css",
 "theme/yeti.css",
 "theme/yonce.css",
 "theme/zenburn.css",
  "/"
];

self.addEventListener("install", evt => {
  console.log("Service Worker instalado.");
  // @ts-ignore
  evt.waitUntil(cargaCache());
});

self.addEventListener("fetch", evt => {
  // @ts-ignore
  if (evt.request.method === "GET") {
    // @ts-ignore
    evt.respondWith(usaCache(evt));
  }
});

self.addEventListener("activate", () => console.log("Service Worker activo."));

async function cargaCache() {
 console.log("Intentando cargar cache:", CACHE)
 const keys = await caches.keys()
 for (const key of keys) {
  await caches.delete(key)
 }
 const cache = await caches.open(CACHE)
 await cache.addAll(ARCHIVOS)
 console.log("Cache cargado:", CACHE)
 console.log("Versión:", VERSION)
}

async function usaCache(evt) {
  const cache = await caches.open(CACHE);
  const response = await cache.match(evt.request, { ignoreSearch: true });
  if (response) {
    return response;
  } else {
    return fetch(evt.request);
  }
}